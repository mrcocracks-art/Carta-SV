<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Una peque침a misi칩n 游눘</title>

<style>
body {
    margin: 0;
    height: 100vh;
    background: url("img/fondo3.jpg") center/cover no-repeat;
    font-family: Georgia, serif;
    overflow: hidden;
    touch-action: manipulation;
}

/* ATM칍SFERA */
body::before {
    content: "";
    position: absolute;
    inset: 0;
    background: rgba(60,45,35,0.45);
}

/* HUD */
#hud {
    position: fixed;
    top: 20px;
    left: 20px;
    color: #f6f1e7;
    font-size: 18px;
    z-index: 3;
}

/* CARTAS */
.scene {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.95);
    background: #f6f1e7;
    padding: 40px;
    width: 420px;
    border-radius: 14px;
    text-align: center;
    z-index: 4;
    box-shadow: 0 30px 60px rgba(0,0,0,0.5);
    display: none;
    animation: aparecer 1s ease forwards;
}

@keyframes aparecer {
    to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

/* CARTA FINAL ARRIBA */
.finalTop {
    position: fixed;
    top: 30px;
    left: 50%;
    transform: translateX(-50%);
    background: #f6f1e7;
    padding: 25px 35px;
    width: 440px;
    border-radius: 14px;
    text-align: center;
    z-index: 5;
    box-shadow: 0 25px 50px rgba(0,0,0,0.5);
    animation: caerCarta 1.5s ease;
}

@keyframes caerCarta {
    from { opacity:0; top:-100px; }
}

/* BOTONES */
button {
    margin: 15px 8px 0;
    padding: 10px 26px;
    border: none;
    border-radius: 20px;
    background: #7b3f2c;
    color: #f6f1e7;
    font-family: Georgia, serif;
    font-size: 16px;
    cursor: pointer;
}

/* CORAZONES */
.corazon {
    position: absolute;
    width: 75px;
    height: 75px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 34px;
    cursor: pointer;
    animation: caer 6s linear forwards;
    touch-action: manipulation;
    user-select: none;
}

@keyframes caer {
    from { top: -40px; }
    to { top: 110vh; }
}

/* PART칈CULAS */
.particula {
    position: absolute;
    font-size: 22px;
    animation: explotar 1s ease-out forwards;
}

@keyframes explotar {
    to {
        transform: translate(var(--x), var(--y)) scale(0);
        opacity: 0;
    }
}

/* P칄TALOS */
.petalo {
    position: absolute;
    font-size: 26px;
    animation: petalos 8s linear forwards;
}

@keyframes petalos {
    from { top: -40px; opacity:1; }
    to { top: 110vh; opacity:0; }
}
</style>
</head>

<body>

<audio id="music" loop>
    <source src="">
</audio>
<audio id="pop">
    <source src="music/Cats and Gats.mp3">
</audio>

<div id="hud">仇벒잺 Corazones: <span id="score">0</span> / 10</div>

<!-- INTRO -->
<div class="scene" id="intro">
    <h2>游눘 Una peque침a misi칩n 游눘</h2>
    <p>
        Amor de mi vidaaaaaaa<br><br>
        Atrapa <b>10 corazones</b>.<br>
        Cada uno guarda algo que quiero decirte 游눏
    </p>
    <button onclick="empezar()">Comenzar</button>
</div>

<!-- PREGUNTA -->
<div class="scene" id="finalScene">
    <h1>   Una 칰ltima pregunta 游눏</h1>
    <p> Ya sin bromas ni rodeos <br> 쯈uieres ser mi San Valent칤n?</p>
    <button onclick="aceptar()">S칤 游눘</button>
    <button id="noBtn">No</button>
</div>

<div class="finalTop" id="finalTop" style="display:none;">
    <h1>游눘 Feliz San Valent칤n 游눘</h1>
    <p>
        Gracias por leer y jugar jsjs.<br>
        Prometo seguir atrapando tu coraz칩n todos los d칤as 游눏
        Amooooor, te amo muchismo, enserio que si, s칠 que lo he dicho ya muchas veces pero no me canso de repetirte que me encantas, que me fascinas y que enserio soy muy feliz a tu lado.
        Me alegra poder decir que estoy en la relaci칩n que siempre so침칠, que a pesar de todo nos seguimos eligiendo d칤a con d칤a, nos seguimos amando incluso m치s que antes, que esta distancia no hizo m치s 
        que engrandecer nuestro amor, un amor que solo nosotros entendemos y que prometo cuidar como lo m치s preciado que tengo. Eres una mujer incre칤ble Eli, enserio que aparte de amarte, te admiro muchisismo;
        te agradezco todo lo que haz hecho por mi, por amarme y por hacerme sentir por primera vez seguro y tranquilo de ser yo... Espero te haya gustado este detalle ya que en 칠l puse todo mi amor y cari침o, te amoooo游눘
    </p>
</div>

<script>
let score = 0;
let jugando = false;
let loop;

const scoreText = document.getElementById("score");
const intro = document.getElementById("intro");
const finalScene = document.getElementById("finalScene");
const music = document.getElementById("music");
const pop = document.getElementById("pop");
const noBtn = document.getElementById("noBtn");

intro.style.display = "block";
music.play();

/* BOT칍N NO ESCAPA */
noBtn.onmouseover = () => {
    noBtn.style.position = "absolute";
    noBtn.style.left = Math.random() * 300 + "px";
    noBtn.style.top = Math.random() * 200 + "px";
};

/* EMPEZAR */
function empezar() {
    jugando = true;
    intro.style.display = "none";
    loop = setInterval(crearCorazon, 900);
}

/* CORAZONES */
function crearCorazon() {
    if (!jugando) return;

    const c = document.createElement("div");
    c.className = "corazon";
    c.innerHTML = "仇벒잺";
    c.style.left = Math.random() * (window.innerWidth - 75) + "px";

    c.addEventListener("pointerdown", e => {
  e.preventDefault();

  score++;
  scoreText.textContent = score;
  pop.play();

  const rect = c.getBoundingClientRect();
  const x = rect.left + rect.width / 2;
  const y = rect.top + rect.height / 2;

  explosion(x, y);

  c.remove();
  if (score >= 10) terminarJuego();
});


    document.body.appendChild(c);
    setTimeout(() => c.remove(), 6000);
}

/* EXPLOSI칍N */
function explosion(x,y){
    for(let i=0;i<8;i++){
        const p = document.createElement("div");
        p.className="particula";
        p.innerHTML="游눘";
        p.style.left=x+"px";
        p.style.top=y+"px";
        p.style.setProperty("--x",(Math.random()*200-100)+"px");
        p.style.setProperty("--y",(Math.random()*200-100)+"px");
        document.body.appendChild(p);
        setTimeout(()=>p.remove(),1000);
    }
}

/* FIN */
function terminarJuego(){
    jugando=false;
    clearInterval(loop);
    document.querySelectorAll(".corazon").forEach(c=>c.remove());
    finalScene.style.display="block";
}

/* ACEPTAR */
function aceptar(){
    finalScene.style.display = "none";
    document.getElementById("finalTop").style.display = "block";
    setInterval(crearPetalo, 500);
}


/* P칄TALOS */
function crearPetalo(){
    const p=document.createElement("div");
    p.className="petalo";
    p.innerHTML="游꺚";
    p.style.left=Math.random()*window.innerWidth+"px";
    document.body.appendChild(p);
    setTimeout(()=>p.remove(),8000);
}
</script>

</body>
</html>
