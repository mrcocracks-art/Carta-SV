<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Una carta para ti</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    height: 100vh;
    font-family: Georgia, serif;
    background: url("img/fondo4.jpg") center/cover no-repeat;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
}

/* ATM√ìSFERA */
body::before {
    content: "";
    position: absolute;
    inset: 0;
    background: rgba(60,45,35,0.45);
}

/* CARTA */
.scene {
    position: relative;
    width: 420px;
    max-width: 90%;
    background: #f6f1e7;
    padding: 40px;
    border-radius: 14px;
    box-shadow: 0 30px 60px rgba(0,0,0,0.5);
    z-index: 2;
    transform-origin: left center;
}

/* APARICI√ìN */
.appear {
    animation: fadeIn 1.4s ease;
}

/* PASAR P√ÅGINA */
.pageTurn {
    animation: pageTurn 1s ease forwards;
}

@keyframes pageTurn {
    0% { transform: rotateY(0); opacity:1; }
    100% { transform: rotateY(-90deg); opacity:0; }
}

/* FOTO */
.scene img {
    position: absolute;
    width: 150px;
    top: -35px;
    right: -55px;
    transform: rotate(-6deg);
    border-radius: 6px;
    box-shadow: 0 15px 30px rgba(0,0,0,0.35);
}

/* TEXTO */
h1 {
    color: #7b3f2c;
    font-weight: normal;
    margin-top: 30px;
}

p {
    font-size: 17px;
    line-height: 1.7;
    color: #3b2a1f;
}

/* BOTONES */
button {
    padding: 10px 24px;
    font-size: 15px;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    font-family: Georgia, serif;
}

#yes {
    background: #7b3f2c;
    color: #f6f1e7;
}

#no {
    background: #d8cfc2;
    color: #6b5a4a;
    position: absolute;
}

/* PART√çCULAS */
.particula {
    position: fixed;
    font-size: 18px;
    pointer-events: none;
    animation: flotar 6s linear forwards;
}

@keyframes flotar {
    from { opacity: 0; transform: translateY(0); }
    to { opacity: 1; transform: translateY(-120px); }
}

/* ANIMACIONES */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(25px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>
</head>

<body>

<!-- M√öSICA -->
<audio id="music" loop>
    <source src="music/song.mp3" type="audio/mpeg">
</audio>

<audio id="paper">
    <source src="music/paper.mp3" type="audio/mpeg">
</audio>

<div class="scene appear" id="scene">
    <img id="foto" src="img/hola4.jpeg">

    <h1 id="titulo"></h1>
    <p id="text"></p>

    <button id="yes" onclick="next()">Continuar</button>
</div>

<script>
/* PERSONALIZA AQU√ç */
const NOMBRE = "Omli amorcito‚ù§Ô∏è";
const fotos = [
    "img/hola3.jpeg",
    "img/hola5.jpeg",
    "img/hola2.jpeg"
];

let paso = 0;
let intentosNo = 0;

const scene = document.getElementById("scene");
const foto = document.getElementById("foto");
const titulo = document.getElementById("titulo");
const text = document.getElementById("text");
const music = document.getElementById("music");
const paper = document.getElementById("paper");

/* INICIO */
titulo.textContent = NOMBRE;
text.innerHTML = "Esto no es solo una carta‚Ä¶<br>Es un peque√±o momento que quer√≠a regalarte.";
music.volume = 0.6;
music.play();

/* EFECTO ESCRITURA */
function escribir(frase, vel=40){
    text.innerHTML="";
    let i=0;
    const t=setInterval(()=>{
        text.innerHTML+=frase.charAt(i);
        i++;
        if(i>=frase.length) clearInterval(t);
    },vel);
}

/* ANIMACIONES */
function animar(){
    scene.classList.remove("appear");
    void scene.offsetWidth;
    scene.classList.add("appear");
}

function pasarPagina(callback){
    paper.play();
    scene.classList.add("pageTurn");
    setTimeout(()=>{
        scene.classList.remove("pageTurn");
        callback();
        animar();
    },900);
}

/* PART√çCULAS */
function crearParticula(){
    const p=document.createElement("div");
    p.className="particula";
    p.innerHTML="üå∏";
    p.style.left=Math.random()*window.innerWidth+"px";
    p.style.bottom="-20px";
    document.body.appendChild(p);
    setTimeout(()=>p.remove(),6000);
}
setInterval(crearParticula,1200);

/* HISTORIA */
function next(){
    pasarPagina(()=>{
        paso++;
        foto.src = fotos[Math.min(paso, fotos.length-1)];

        if(paso===1)
            escribir("Hay personas que hacen que los d√≠as se sientan m√°s c√°lidos sin darse cuenta, y puedo asegurarte que tu eres una de ellas. Sinceramente no sabia como preguntarte esto, era algo que me entusiasmaba bastante as√≠ que quise hacer algo diferente. Si bien s√© que no es algo asombroso, quiero que sepas que lo hice con todo el cari√±o del mundo *peque√±o parentesis para decir que por eso tarde tanto jsjs* y que de verdad espero que te guste, tal como a mi me gusta formar parte de tu vida, tener algo asi de especial con alguien que sin temor a equivocarme puedo decir es el amor de mi vida...  ");

        if(paso===2)
            escribir("Y por eso, con un poco de nervios, hoy queria preguntarte algo importante.");

        if(paso===3){
    scene.innerHTML = `
        <a href="juego1.html">
            <img src="${fotos[2]}" alt="recuerdo final">
        </a>

        <h1>Pero antes de üíå</h1>
        <p>
            ¬øPuedes clickear sobre tu carita preciosa?
        </p>
    `;
}

    });
}

/* BOT√ìN NO */
function huir(){
    const no=document.getElementById("no");
    intentosNo++;
    if(intentosNo>=3){ no.remove(); return; }
    no.style.left=Math.random()*260+"px";
    no.style.top=Math.random()*180+"px";
}


</script>

</body>
</html>
